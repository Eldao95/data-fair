{
  "title": "Settings",
  "type": "object",
  "additionalProperties": false,
  "required": ["id", "type"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Identifier of the owner of this settings"
    },
    "type": {
      "type": "string",
      "enum": ["user", "organization"],
      "description": "If the owner is a user or an organization"
    },
    "name": {
      "type": "string",
      "description": "The name of the owner"
    },
    "webhooks": {
      "type": "array",
      "title": "Liste d'appels extérieurs",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["title", "events", "target"],
        "properties": {
          "title": {
            "type": "string",
            "title": "Titre"
          },
          "events": {
            "type": "array",
            "title": "Événements déclencheurs",
            "items": {
              "type": "string",
              "oneOf": [{
                "const": "dataset-dataset-created",
                "title": "Un nouveau jeu de données a été créé"
              }, {
                "const": "dataset-error",
                "title": "Un jeu de données a rencontré une erreur"
              }, {
                "const": "dataset-finalize-end",
                "title": "Un jeu de données a été finalisé et mis en ligne"
              }, {
                "const": "dataset-publication",
                "title": "Un jeu de données a été publié sur un catalogue"
              }, {
                "const": "dataset-downloaded",
                "title": "Un jeu de données a été téléchargé dans un format fichier"
              }, {
                "const": "application-application-created",
                "title": "Une nouvelle réutilisation a été créée"
              }, {
                "const": "application-error",
                "title": "Une réutilisation a rencontré une erreur"
              }, {
                "const": "application-publication",
                "title": "Une réutilisation a été publiée sur un catalogue rencontré une erreur"
              }]
            }
          },
          "target": {
            "type": "object",
            "oneOf": [{
              "title": "Appel HTTP simple (compatible avec Slack et Mattermost)",
              "properties": {
                "type": {
                  "const": "http",
                  "title": "Type de cible"
                },
                "params": {
                  "type": "object",
                  "required": ["url"],
                  "properties": {
                    "url": {
                      "type": "string",
                      "title": "URL du serveur HTTP cible"
                    }
                  }
                }
              }
            }, {
              "title": "Google Analytics",
              "properties": {
                "type": {
                  "const": "ga"
                },
                "params": {
                  "type": "object",
                  "required": ["trackingId", "appName", "appVersion"],
                  "properties": {
                    "trackingId": {
                      "type": "string",
                      "title": "Identifiant du tracker"
                    },
                    "appName": {
                      "type": "string",
                      "title": "Nom de l'application"
                    },
                    "appVersion": {
                      "type": "string",
                      "title": "Version de l'application"
                    }
                  }
                }
              }
            }]
          }
        }
      }
    },
    "licenses": {
      "type": "array",
      "description": "List of licenses",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["title", "href"],
        "properties": {
          "title": {
            "type": "string",
            "description": "Short title for the license"
          },
          "href":{
            "type": "string",
            "description": "The URL where the license can be read"
          }
        }
      }
    },
    "apiKeys": {
      "type": "array",
      "description": "Lis of API keys",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["title"],
        "properties": {
          "title": {
            "type": "string"
          },
          "key": {
            "type": "string"
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "operationsPermissions":{
      "type": "object"
    }
  }
}
